<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Influencer Console</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    <script>
        const module = angular.module("myModule", []);
        const controller = module.controller("myController", ($scope, $http) => {
            $scope.fetchAll = function() {
                const url = "/fetch-all-infl";

                $http.get(url).then(function(resp) {
                    //success callback
                    if(Array.isArray(resp.data)){
                        $scope.inflAry = resp.data;
                        console.log(resp.data);
                    } else { alert(resp.data); }
                }, function (resp) {
                    //error callback
                    alert("Error: " + resp.status + " " + resp.statusText);
                });
            }
        })
    </script>
</head>
<body ng-app="myModule" ng-controller="myController" ng-init="fetchAll();">
    <h2 class="text-white p-2" style="text-align: center; background-color: rgb(23, 52, 139);">Influencer Console</h2>
    <div class="m-5 text-center table-responsive">
        <table class="table table-hover table-light">
            <thead class="table-dark">
                <th>Serial No.</th>
                <th>Email Address</th>
                <th>Name</th>
                <th>Profile pic</th>
                <th>Gender</th>
                <th>D.O.B.</th>
                <th>Address</th>
                <th>Contact No.</th>
                <th>State</th>
                <th>City</th>
                <th>Zip Code</th>
                <th>Content Category</th>
                <th>Instagram</th>
                <th>Facebook</th>
                <th>YouTube</th>
                <th>Other</th>
            </thead>
            <tbody>
                <tr ng-repeat="infl in inflAry">
                    <td>{{$index+1}}</td>
                    <td>{{infl.iemail}}</td>
                    <td>{{infl.iname}}</td>
                    <td>
                        <img src="./uploads/{{infl.ippic}}" alt="profile pictures" height="60" width="65">
                    </td>
                    <td>{{infl.igender}}</td>
                    <td>{{infl.idob}}</td>
                    <td>{{infl.iaddress}}</td>
                    <td>{{infl.iphone}}</td>
                    <td>{{infl.istate}}</td>
                    <td>{{infl.icity}}</td>
                    <td>{{infl.izip}}</td>
                    <td>{{infl.icategory}}</td>
                    <td>{{infl.iinsta}}</td>
                    <td>{{infl.ifb}}</td>
                    <td>{{infl.iyt}}</td>
                    <td>{{infl.iother}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>